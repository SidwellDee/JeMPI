package org.jembi.jempi.async_receiver;

import org.apache.commons.csv.CSVRecord;
import org.jembi.jempi.shared.models.CustomSourceId;
import org.jembi.jempi.shared.models.AuxInteractionData;

final class CustomAsyncHelper {

   private static final int AUX_ID_COL_NUM = 0;
   private static final int AUX_CLINICAL_DATA_COL_NUM = 10;
   private static final int SOURCEID_FACILITY_COL_NUM = 8;
   private static final int SOURCEID_PATIENT_COL_NUM = 9;


   private CustomAsyncHelper() {
   }

   static AuxInteractionData customUniqueInteractionData(final CSVRecord csvRecord) {
      return new AuxInteractionData(java.time.LocalDateTime.now(),
                                    Main.parseRecordNumber(csvRecord.get(AUX_ID_COL_NUM)),
                                    csvRecord.get(AUX_CLINICAL_DATA_COL_NUM));
   }

   static CustomSourceId customSourceId(final CSVRecord csvRecord) {
      return new CustomSourceId(
         null,
         csvRecord.get(SOURCEID_FACILITY_COL_NUM),
         csvRecord.get(SOURCEID_PATIENT_COL_NUM));
   }

}

